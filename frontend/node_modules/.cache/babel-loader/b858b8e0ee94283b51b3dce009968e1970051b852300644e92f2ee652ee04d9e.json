{"ast":null,"code":"var _jsxFileName = \"E:\\\\Du_An_300tr\\\\frontend\\\\src\\\\components\\\\NghiPhep\\\\DonNghiPhepList.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { Table, Card, Button, message } from 'antd';\nimport { nghiPhepService } from '../../services/nghiPhepService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DonNghiPhepList = ({\n  reload\n}) => {\n  _s();\n  const [list, setList] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const loadList = () => {\n    setLoading(true);\n    nghiPhepService.getList({}).then(res => {\n      console.log('DonNghiPhepList API raw:', res);\n      setList(res.data || []);\n    }).finally(() => setLoading(false));\n  };\n  useEffect(() => {\n    loadList();\n    // eslint-disable-next-line\n  }, [reload]);\n  const handleApprove = async id => {\n    try {\n      await nghiPhepService.approve(id);\n      message.success('Đã duyệt đơn!');\n      loadList();\n    } catch (err) {\n      message.error('Duyệt đơn thất bại!');\n    }\n  };\n  const columns = [{\n    title: 'Nhân viên',\n    dataIndex: 'nhan_vien',\n    key: 'nhan_vien',\n    render: nv => (nv === null || nv === void 0 ? void 0 : nv.ten) || (nv === null || nv === void 0 ? void 0 : nv.ma_nhan_vien) || '-'\n  }, {\n    title: 'Ngày nghỉ',\n    dataIndex: 'ngay_nghi',\n    key: 'ngay_nghi'\n  }, {\n    title: 'Loại',\n    dataIndex: 'loai_nghi',\n    key: 'loai_nghi'\n  }, {\n    title: 'Lý do',\n    dataIndex: 'ly_do',\n    key: 'ly_do'\n  }, {\n    title: 'Trạng thái',\n    dataIndex: 'trang_thai',\n    key: 'trang_thai'\n  }, {\n    title: 'Thao tác',\n    key: 'action',\n    render: (text, record) => record.trang_thai === 'cho_duyet' ? /*#__PURE__*/_jsxDEV(Button, {\n      type: \"primary\",\n      onClick: () => handleApprove(record.id),\n      children: \"Duy\\u1EC7t\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 11\n    }, this) : null\n  }];\n  return /*#__PURE__*/_jsxDEV(Card, {\n    title: \"Danh s\\xE1ch \\u0111\\u01A1n ngh\\u1EC9 ph\\xE9p\",\n    style: {\n      margin: '32px auto',\n      maxWidth: 800\n    },\n    children: /*#__PURE__*/_jsxDEV(Table, {\n      columns: columns,\n      dataSource: Array.isArray(list) ? list : [],\n      loading: loading,\n      rowKey: \"id\",\n      pagination: {\n        pageSize: 10\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n};\n_s(DonNghiPhepList, \"Q1FMDgI9pJTJwoFIRt5NrENtKKw=\");\n_c = DonNghiPhepList;\nexport default DonNghiPhepList;\nvar _c;\n$RefreshReg$(_c, \"DonNghiPhepList\");","map":{"version":3,"names":["React","useEffect","useState","Table","Card","Button","message","nghiPhepService","jsxDEV","_jsxDEV","DonNghiPhepList","reload","_s","list","setList","loading","setLoading","loadList","getList","then","res","console","log","data","finally","handleApprove","id","approve","success","err","error","columns","title","dataIndex","key","render","nv","ten","ma_nhan_vien","text","record","trang_thai","type","onClick","children","fileName","_jsxFileName","lineNumber","columnNumber","style","margin","maxWidth","dataSource","Array","isArray","rowKey","pagination","pageSize","_c","$RefreshReg$"],"sources":["E:/Du_An_300tr/frontend/src/components/NghiPhep/DonNghiPhepList.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Table, Card, Button, message } from 'antd';\r\nimport { nghiPhepService } from '../../services/nghiPhepService';\r\n\r\nconst DonNghiPhepList = ({ reload }) => {\r\n  const [list, setList] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const loadList = () => {\r\n    setLoading(true);\r\n    nghiPhepService.getList({})\r\n      .then(res => {\r\n        console.log('DonNghiPhepList API raw:', res);\r\n        setList(res.data || []);\r\n      })\r\n      .finally(() => setLoading(false));\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadList();\r\n    // eslint-disable-next-line\r\n  }, [reload]);\r\n\r\n  const handleApprove = async (id) => {\r\n    try {\r\n      await nghiPhepService.approve(id);\r\n      message.success('Đã duyệt đơn!');\r\n      loadList();\r\n    } catch (err) {\r\n      message.error('Duyệt đơn thất bại!');\r\n    }\r\n  };\r\n\r\n  const columns = [\r\n    { title: 'Nhân viên', dataIndex: 'nhan_vien', key: 'nhan_vien', render: nv => nv?.ten || nv?.ma_nhan_vien || '-' },\r\n    { title: 'Ngày nghỉ', dataIndex: 'ngay_nghi', key: 'ngay_nghi' },\r\n    { title: 'Loại', dataIndex: 'loai_nghi', key: 'loai_nghi' },\r\n    { title: 'Lý do', dataIndex: 'ly_do', key: 'ly_do' },\r\n    { title: 'Trạng thái', dataIndex: 'trang_thai', key: 'trang_thai' },\r\n    {\r\n      title: 'Thao tác',\r\n      key: 'action',\r\n      render: (text, record) =>\r\n        record.trang_thai === 'cho_duyet' ? (\r\n          <Button type=\"primary\" onClick={() => handleApprove(record.id)}>Duyệt</Button>\r\n        ) : null\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <Card title=\"Danh sách đơn nghỉ phép\" style={{ margin: '32px auto', maxWidth: 800 }}>\r\n      <Table columns={columns} dataSource={Array.isArray(list) ? list : []} loading={loading} rowKey=\"id\" pagination={{ pageSize: 10 }} />\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default DonNghiPhepList; "],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,KAAK,EAAEC,IAAI,EAAEC,MAAM,EAAEC,OAAO,QAAQ,MAAM;AACnD,SAASC,eAAe,QAAQ,gCAAgC;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEjE,MAAMC,eAAe,GAAGA,CAAC;EAAEC;AAAO,CAAC,KAAK;EAAAC,EAAA;EACtC,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACa,OAAO,EAAEC,UAAU,CAAC,GAAGd,QAAQ,CAAC,KAAK,CAAC;EAE7C,MAAMe,QAAQ,GAAGA,CAAA,KAAM;IACrBD,UAAU,CAAC,IAAI,CAAC;IAChBT,eAAe,CAACW,OAAO,CAAC,CAAC,CAAC,CAAC,CACxBC,IAAI,CAACC,GAAG,IAAI;MACXC,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEF,GAAG,CAAC;MAC5CN,OAAO,CAACM,GAAG,CAACG,IAAI,IAAI,EAAE,CAAC;IACzB,CAAC,CAAC,CACDC,OAAO,CAAC,MAAMR,UAAU,CAAC,KAAK,CAAC,CAAC;EACrC,CAAC;EAEDf,SAAS,CAAC,MAAM;IACdgB,QAAQ,CAAC,CAAC;IACV;EACF,CAAC,EAAE,CAACN,MAAM,CAAC,CAAC;EAEZ,MAAMc,aAAa,GAAG,MAAOC,EAAE,IAAK;IAClC,IAAI;MACF,MAAMnB,eAAe,CAACoB,OAAO,CAACD,EAAE,CAAC;MACjCpB,OAAO,CAACsB,OAAO,CAAC,eAAe,CAAC;MAChCX,QAAQ,CAAC,CAAC;IACZ,CAAC,CAAC,OAAOY,GAAG,EAAE;MACZvB,OAAO,CAACwB,KAAK,CAAC,qBAAqB,CAAC;IACtC;EACF,CAAC;EAED,MAAMC,OAAO,GAAG,CACd;IAAEC,KAAK,EAAE,WAAW;IAAEC,SAAS,EAAE,WAAW;IAAEC,GAAG,EAAE,WAAW;IAAEC,MAAM,EAAEC,EAAE,IAAI,CAAAA,EAAE,aAAFA,EAAE,uBAAFA,EAAE,CAAEC,GAAG,MAAID,EAAE,aAAFA,EAAE,uBAAFA,EAAE,CAAEE,YAAY,KAAI;EAAI,CAAC,EAClH;IAAEN,KAAK,EAAE,WAAW;IAAEC,SAAS,EAAE,WAAW;IAAEC,GAAG,EAAE;EAAY,CAAC,EAChE;IAAEF,KAAK,EAAE,MAAM;IAAEC,SAAS,EAAE,WAAW;IAAEC,GAAG,EAAE;EAAY,CAAC,EAC3D;IAAEF,KAAK,EAAE,OAAO;IAAEC,SAAS,EAAE,OAAO;IAAEC,GAAG,EAAE;EAAQ,CAAC,EACpD;IAAEF,KAAK,EAAE,YAAY;IAAEC,SAAS,EAAE,YAAY;IAAEC,GAAG,EAAE;EAAa,CAAC,EACnE;IACEF,KAAK,EAAE,UAAU;IACjBE,GAAG,EAAE,QAAQ;IACbC,MAAM,EAAEA,CAACI,IAAI,EAAEC,MAAM,KACnBA,MAAM,CAACC,UAAU,KAAK,WAAW,gBAC/BhC,OAAA,CAACJ,MAAM;MAACqC,IAAI,EAAC,SAAS;MAACC,OAAO,EAAEA,CAAA,KAAMlB,aAAa,CAACe,MAAM,CAACd,EAAE,CAAE;MAAAkB,QAAA,EAAC;IAAK;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,GAC5E;EACR,CAAC,CACF;EAED,oBACEvC,OAAA,CAACL,IAAI;IAAC4B,KAAK,EAAC,8CAAyB;IAACiB,KAAK,EAAE;MAAEC,MAAM,EAAE,WAAW;MAAEC,QAAQ,EAAE;IAAI,CAAE;IAAAP,QAAA,eAClFnC,OAAA,CAACN,KAAK;MAAC4B,OAAO,EAAEA,OAAQ;MAACqB,UAAU,EAAEC,KAAK,CAACC,OAAO,CAACzC,IAAI,CAAC,GAAGA,IAAI,GAAG,EAAG;MAACE,OAAO,EAAEA,OAAQ;MAACwC,MAAM,EAAC,IAAI;MAACC,UAAU,EAAE;QAAEC,QAAQ,EAAE;MAAG;IAAE;MAAAZ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAChI,CAAC;AAEX,CAAC;AAACpC,EAAA,CAlDIF,eAAe;AAAAgD,EAAA,GAAfhD,eAAe;AAoDrB,eAAeA,eAAe;AAAC,IAAAgD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}