{"ast":null,"code":"var _jsxFileName = \"E:\\\\Du_An_300tr\\\\frontend\\\\src\\\\components\\\\ChamCong\\\\RegisterFace.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { nhanVienService } from '../../services/nhanVienService';\nimport { chamCongService } from '../../services/chamCongService';\nimport FaceRecognition from './FaceRecognition';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst convertErrorMessage = (raw, selectedEmployee) => {\n  try {\n    // Nếu là object\n    if (typeof raw === 'object' && raw !== null) {\n      if (raw.message) {\n        // Kiểm tra nếu là lỗi đã đăng ký và là chính mình\n        if (raw.message.includes('đã được đăng ký') && selectedEmployee) {\n          const match = raw.message.match(/nhân viên: (.+)/);\n          const name = (match === null || match === void 0 ? void 0 : match[1]) || '';\n          if (name && selectedEmployee.ten && name.trim() === selectedEmployee.ten.trim()) {\n            return 'Bạn đang cập nhật lại khuôn mặt của mình. Đăng ký sẽ ghi đè dữ liệu cũ.';\n          }\n        }\n        return raw.message;\n      }\n      return JSON.stringify(raw);\n    }\n    // Nếu là chuỗi JSON\n    if (typeof raw === 'string') {\n      try {\n        const parsed = JSON.parse(raw);\n        if (parsed !== null && parsed !== void 0 && parsed.message) {\n          if (parsed.message.includes('đã được đăng ký') && selectedEmployee) {\n            const match = parsed.message.match(/nhân viên: (.+)/);\n            const name = (match === null || match === void 0 ? void 0 : match[1]) || '';\n            if (name && selectedEmployee.ten && name.trim() === selectedEmployee.ten.trim()) {\n              return 'Bạn đang cập nhật lại khuôn mặt của mình. Đăng ký sẽ ghi đè dữ liệu cũ.';\n            }\n          }\n          return parsed.message;\n        }\n      } catch {\n        // Nếu là chuỗi unicode, decode lại\n        try {\n          const decoded = raw.replace(/\\u([0-9a-fA-F]{4})/g, (m, g1) => String.fromCharCode(parseInt(g1, 16)));\n          if (decoded.includes('đã được đăng ký') && selectedEmployee) {\n            const match = decoded.match(/nhân viên: (.+)/);\n            const name = (match === null || match === void 0 ? void 0 : match[1]) || '';\n            if (name && selectedEmployee.ten && name.trim() === selectedEmployee.ten.trim()) {\n              return 'Bạn đang cập nhật lại khuôn mặt của mình. Đăng ký sẽ ghi đè dữ liệu cũ.';\n            }\n          }\n          return decoded;\n        } catch {}\n      }\n      return raw;\n    }\n    return 'Đã xảy ra lỗi không xác định.';\n  } catch (e) {\n    return 'Đã xảy ra lỗi. Vui lòng thử lại.';\n  }\n};\nconst RegisterFace = () => {\n  _s();\n  const [employees, setEmployees] = useState([]);\n  const [selectedEmployee, setSelectedEmployee] = useState(null);\n  const [message, setMessage] = useState('');\n  const [registrationStatus, setRegistrationStatus] = useState('idle');\n  const [hasFaceData, setHasFaceData] = useState(false); // mới\n  const [allowOverride, setAllowOverride] = useState(false); // mới\n  const selectedEmployeeRef = useRef(null);\n  useEffect(() => {\n    selectedEmployeeRef.current = selectedEmployee;\n  }, [selectedEmployee]);\n  useEffect(() => {\n    loadEmployees();\n  }, []);\n  const loadEmployees = async () => {\n    try {\n      const data = await nhanVienService.getAll();\n      if (Array.isArray(data)) {\n        setEmployees(data);\n      } else if (data && Array.isArray(data.data)) {\n        setEmployees(data.data);\n      } else {\n        console.error('Invalid employees data format:', data);\n        setEmployees([]);\n        setMessage('❌ Dữ liệu nhân viên không hợp lệ');\n      }\n    } catch (error) {\n      console.error('Error loading employees:', error);\n      setEmployees([]);\n      setMessage('❌ Lỗi khi tải danh sách nhân viên: ' + error.message);\n    }\n  };\n  const handleRegisterFace = useCallback(async faceDescriptor => {\n    if (!selectedEmployeeRef.current) {\n      setMessage('❌ Vui lòng chọn nhân viên trước');\n      return;\n    }\n    setRegistrationStatus('processing');\n    setMessage('🔄 Đang đăng ký khuôn mặt...');\n    try {\n      const result = await chamCongService.registerFace({\n        nhan_vien_id: selectedEmployeeRef.current.id,\n        face_descriptor: Array.from(faceDescriptor)\n      });\n      if (result.success) {\n        setRegistrationStatus('success');\n        setMessage(`✅ ${result.message}`);\n        setTimeout(() => {\n          setRegistrationStatus('idle');\n          setSelectedEmployee(null);\n          setMessage('');\n        }, 3000);\n      } else {\n        setRegistrationStatus('error');\n        setMessage(`❌ ${convertErrorMessage(result.message, selectedEmployeeRef.current)}`);\n      }\n    } catch (error) {\n      setRegistrationStatus('error');\n      let msg = error.message;\n      try {\n        // Nếu message bắt đầu bằng HTTP 400:, tách lấy phần JSON\n        if (msg && msg.includes('HTTP 400:')) {\n          var _msg$split$;\n          const jsonPart = (_msg$split$ = msg.split('HTTP 400:')[1]) === null || _msg$split$ === void 0 ? void 0 : _msg$split$.trim();\n          if (jsonPart) {\n            const parsed = JSON.parse(jsonPart);\n            msg = parsed.message || msg;\n          }\n        }\n        // Nếu message là JSON thuần\n        else if (msg && msg.startsWith('{')) {\n          const parsed = JSON.parse(msg);\n          msg = parsed.message || msg;\n        }\n      } catch {}\n      setMessage(`❌ ${msg || 'Đăng ký khuôn mặt thất bại'}`);\n    }\n  }, []);\n  const checkRegistrationStatus = async employeeId => {\n    try {\n      const response = await fetch(`http://localhost:8000/api/cham-cong/registration-status/${employeeId}`);\n      const raw = await response.text();\n      let result;\n      try {\n        result = JSON.parse(raw);\n      } catch (e) {\n        console.error('❌ Không phải JSON:', raw);\n        setMessage('❌ Không thể kiểm tra trạng thái đăng ký (Phản hồi không hợp lệ)');\n        setHasFaceData(false);\n        setAllowOverride(false);\n        return;\n      }\n      if (result.success && result.data && result.data.has_face_data) {\n        setMessage(`ℹ️ Nhân viên này đã đăng ký khuôn mặt vào ${new Date(result.data.registered_at).toLocaleString()}`);\n        setHasFaceData(true);\n        setAllowOverride(false);\n      } else {\n        setMessage('ℹ️ Nhân viên này chưa đăng ký khuôn mặt');\n        setHasFaceData(false);\n        setAllowOverride(false);\n      }\n    } catch (error) {\n      console.error('Error checking registration status:', error);\n      setMessage(`❌ Lỗi khi kiểm tra trạng thái: ${error.message}`);\n      setHasFaceData(false);\n      setAllowOverride(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: '20px',\n      maxWidth: '800px',\n      margin: '0 auto'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        textAlign: 'center',\n        marginBottom: '30px',\n        color: '#007bff'\n      },\n      children: \"\\uD83D\\uDCDD \\u0110\\u0103ng k\\xFD khu\\xF4n m\\u1EB7t\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        style: {\n          display: 'block',\n          marginBottom: '10px',\n          fontWeight: 'bold'\n        },\n        children: \"Ch\\u1ECDn nh\\xE2n vi\\xEAn:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: (selectedEmployee === null || selectedEmployee === void 0 ? void 0 : selectedEmployee.id) || '',\n        onChange: e => {\n          const employee = employees.find(emp => emp.id === parseInt(e.target.value));\n          setSelectedEmployee(employee);\n          setMessage('');\n          setHasFaceData(false);\n          setAllowOverride(false);\n          if (employee) {\n            checkRegistrationStatus(employee.id);\n          }\n        },\n        style: {\n          width: '100%',\n          padding: '10px',\n          border: '2px solid #ddd',\n          borderRadius: '5px',\n          fontSize: '16px'\n        },\n        disabled: registrationStatus === 'processing',\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"-- Ch\\u1ECDn nh\\xE2n vi\\xEAn --\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 11\n        }, this), Array.isArray(employees) && employees.map(employee => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: employee.id,\n          children: [employee.ma_nhan_vien, \" - \", employee.ten]\n        }, employee.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }, this), selectedEmployee && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        backgroundColor: '#f8f9fa',\n        padding: '15px',\n        borderRadius: '5px',\n        marginBottom: '20px',\n        border: '1px solid #dee2e6'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        style: {\n          margin: '0 0 10px 0',\n          color: '#495057'\n        },\n        children: \"Th\\xF4ng tin nh\\xE2n vi\\xEAn:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"M\\xE3:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 14\n        }, this), \" \", selectedEmployee.ma_nhan_vien]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"T\\xEAn:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 14\n        }, this), \" \", selectedEmployee.ten]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Email:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 14\n        }, this), \" \", selectedEmployee.email]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 9\n    }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '15px',\n        marginBottom: '20px',\n        borderRadius: '5px',\n        backgroundColor: message.includes('❌') ? '#f8d7da' : message.includes('✅') ? '#d4edda' : message.includes('ℹ️') ? '#d1ecf1' : '#fff3cd',\n        color: message.includes('❌') ? '#721c24' : message.includes('✅') ? '#155724' : message.includes('ℹ️') ? '#0c5460' : '#856404',\n        border: `1px solid ${message.includes('❌') ? '#f5c6cb' : message.includes('✅') ? '#c3e6cb' : message.includes('ℹ️') ? '#bee5eb' : '#ffeaa7'}`\n      },\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 9\n    }, this), selectedEmployee && hasFaceData && !allowOverride && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: 'center',\n        marginBottom: '20px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setAllowOverride(true),\n        style: {\n          padding: '10px 20px',\n          backgroundColor: '#ffc107',\n          color: '#212529',\n          border: 'none',\n          borderRadius: '5px',\n          cursor: 'pointer',\n          fontWeight: 'bold',\n          fontSize: '16px'\n        },\n        children: \"\\uD83D\\uDD04 Thay m\\u1EDBi khu\\xF4n m\\u1EB7t\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 9\n    }, this), selectedEmployee && (!hasFaceData || allowOverride) && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: 'center'\n      },\n      children: /*#__PURE__*/_jsxDEV(FaceRecognition, {\n        onRegisterFace: handleRegisterFace,\n        mode: \"register\",\n        selectedEmployee: selectedEmployee,\n        disabled: registrationStatus === 'processing'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '30px',\n        padding: '20px',\n        backgroundColor: '#e9ecef',\n        borderRadius: '5px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        style: {\n          color: '#495057',\n          marginBottom: '15px'\n        },\n        children: \"\\uD83D\\uDCCB H\\u01B0\\u1EDBng d\\u1EABn:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        style: {\n          color: '#6c757d',\n          lineHeight: '1.6'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"Ch\\u1ECDn nh\\xE2n vi\\xEAn c\\u1EA7n \\u0111\\u0103ng k\\xFD khu\\xF4n m\\u1EB7t\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"\\u0110\\u1EA3m b\\u1EA3o \\xE1nh s\\xE1ng \\u0111\\u1EE7 v\\xE0 khu\\xF4n m\\u1EB7t r\\xF5 n\\xE9t\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"Nh\\xECn th\\u1EB3ng v\\xE0o camera v\\xE0 gi\\u1EEF y\\xEAn\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"Ch\\u1EDD thanh ti\\u1EBFn tr\\xECnh ho\\xE0n th\\xE0nh\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"M\\u1ED7i nh\\xE2n vi\\xEAn ch\\u1EC9 \\u0111\\u0103ng k\\xFD m\\u1ED9t l\\u1EA7n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 178,\n    columnNumber: 5\n  }, this);\n};\n_s(RegisterFace, \"ybBIxPd8/erqxLPRoqataJ5F4vk=\");\n_c = RegisterFace;\nexport default RegisterFace;\nvar _c;\n$RefreshReg$(_c, \"RegisterFace\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","nhanVienService","chamCongService","FaceRecognition","jsxDEV","_jsxDEV","convertErrorMessage","raw","selectedEmployee","message","includes","match","name","ten","trim","JSON","stringify","parsed","parse","decoded","replace","m","g1","String","fromCharCode","parseInt","e","RegisterFace","_s","employees","setEmployees","setSelectedEmployee","setMessage","registrationStatus","setRegistrationStatus","hasFaceData","setHasFaceData","allowOverride","setAllowOverride","selectedEmployeeRef","current","loadEmployees","data","getAll","Array","isArray","console","error","handleRegisterFace","faceDescriptor","result","registerFace","nhan_vien_id","id","face_descriptor","from","success","setTimeout","msg","_msg$split$","jsonPart","split","startsWith","checkRegistrationStatus","employeeId","response","fetch","text","has_face_data","Date","registered_at","toLocaleString","style","padding","maxWidth","margin","children","textAlign","marginBottom","color","fileName","_jsxFileName","lineNumber","columnNumber","display","fontWeight","value","onChange","employee","find","emp","target","width","border","borderRadius","fontSize","disabled","map","ma_nhan_vien","backgroundColor","email","onClick","cursor","onRegisterFace","mode","marginTop","lineHeight","_c","$RefreshReg$"],"sources":["E:/Du_An_300tr/frontend/src/components/ChamCong/RegisterFace.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { nhanVienService } from '../../services/nhanVienService';\nimport { chamCongService } from '../../services/chamCongService';\nimport FaceRecognition from './FaceRecognition';\n\nconst convertErrorMessage = (raw, selectedEmployee) => {\n  try {\n    // Nếu là object\n    if (typeof raw === 'object' && raw !== null) {\n      if (raw.message) {\n        // Kiểm tra nếu là lỗi đã đăng ký và là chính mình\n        if (raw.message.includes('đã được đăng ký') && selectedEmployee) {\n          const match = raw.message.match(/nhân viên: (.+)/);\n          const name = match?.[1] || '';\n          if (name && selectedEmployee.ten && name.trim() === selectedEmployee.ten.trim()) {\n            return 'Bạn đang cập nhật lại khuôn mặt của mình. Đăng ký sẽ ghi đè dữ liệu cũ.';\n          }\n        }\n        return raw.message;\n      }\n      return JSON.stringify(raw);\n    }\n    // Nếu là chuỗi JSON\n    if (typeof raw === 'string') {\n      try {\n        const parsed = JSON.parse(raw);\n        if (parsed?.message) {\n          if (parsed.message.includes('đã được đăng ký') && selectedEmployee) {\n            const match = parsed.message.match(/nhân viên: (.+)/);\n            const name = match?.[1] || '';\n            if (name && selectedEmployee.ten && name.trim() === selectedEmployee.ten.trim()) {\n              return 'Bạn đang cập nhật lại khuôn mặt của mình. Đăng ký sẽ ghi đè dữ liệu cũ.';\n            }\n          }\n          return parsed.message;\n        }\n      } catch {\n        // Nếu là chuỗi unicode, decode lại\n        try {\n          const decoded = raw.replace(/\\u([0-9a-fA-F]{4})/g, (m, g1) => String.fromCharCode(parseInt(g1, 16)));\n          if (decoded.includes('đã được đăng ký') && selectedEmployee) {\n            const match = decoded.match(/nhân viên: (.+)/);\n            const name = match?.[1] || '';\n            if (name && selectedEmployee.ten && name.trim() === selectedEmployee.ten.trim()) {\n              return 'Bạn đang cập nhật lại khuôn mặt của mình. Đăng ký sẽ ghi đè dữ liệu cũ.';\n            }\n          }\n          return decoded;\n        } catch {}\n      }\n      return raw;\n    }\n    return 'Đã xảy ra lỗi không xác định.';\n  } catch (e) {\n    return 'Đã xảy ra lỗi. Vui lòng thử lại.';\n  }\n};\n\nconst RegisterFace = () => {\n  const [employees, setEmployees] = useState([]);\n  const [selectedEmployee, setSelectedEmployee] = useState(null);\n  const [message, setMessage] = useState('');\n  const [registrationStatus, setRegistrationStatus] = useState('idle');\n  const [hasFaceData, setHasFaceData] = useState(false); // mới\n  const [allowOverride, setAllowOverride] = useState(false); // mới\n  const selectedEmployeeRef = useRef(null);\n\n  useEffect(() => {\n    selectedEmployeeRef.current = selectedEmployee;\n  }, [selectedEmployee]);\n\n  useEffect(() => {\n    loadEmployees();\n  }, []);\n\n  const loadEmployees = async () => {\n    try {\n      const data = await nhanVienService.getAll();\n      if (Array.isArray(data)) {\n        setEmployees(data);\n      } else if (data && Array.isArray(data.data)) {\n        setEmployees(data.data);\n      } else {\n        console.error('Invalid employees data format:', data);\n        setEmployees([]);\n        setMessage('❌ Dữ liệu nhân viên không hợp lệ');\n      }\n    } catch (error) {\n      console.error('Error loading employees:', error);\n      setEmployees([]);\n      setMessage('❌ Lỗi khi tải danh sách nhân viên: ' + error.message);\n    }\n  };\n\n  const handleRegisterFace = useCallback(async (faceDescriptor) => {\n    if (!selectedEmployeeRef.current) {\n      setMessage('❌ Vui lòng chọn nhân viên trước');\n      return;\n    }\n\n    setRegistrationStatus('processing');\n    setMessage('🔄 Đang đăng ký khuôn mặt...');\n\n    try {\n      const result = await chamCongService.registerFace({\n        nhan_vien_id: selectedEmployeeRef.current.id,\n        face_descriptor: Array.from(faceDescriptor)\n      });\n\n      if (result.success) {\n        setRegistrationStatus('success');\n        setMessage(`✅ ${result.message}`);\n        setTimeout(() => {\n          setRegistrationStatus('idle');\n          setSelectedEmployee(null);\n          setMessage('');\n        }, 3000);\n      } else {\n        setRegistrationStatus('error');\n        setMessage(`❌ ${convertErrorMessage(result.message, selectedEmployeeRef.current)}`);\n      }\n    } catch (error) {\n      setRegistrationStatus('error');\n      let msg = error.message;\n      try {\n        // Nếu message bắt đầu bằng HTTP 400:, tách lấy phần JSON\n        if (msg && msg.includes('HTTP 400:')) {\n          const jsonPart = msg.split('HTTP 400:')[1]?.trim();\n          if (jsonPart) {\n            const parsed = JSON.parse(jsonPart);\n            msg = parsed.message || msg;\n          }\n        }\n        // Nếu message là JSON thuần\n        else if (msg && msg.startsWith('{')) {\n          const parsed = JSON.parse(msg);\n          msg = parsed.message || msg;\n        }\n      } catch {}\n      setMessage(`❌ ${msg || 'Đăng ký khuôn mặt thất bại'}`);\n    }\n  }, []);\n\n  const checkRegistrationStatus = async (employeeId) => {\n    try {\n      const response = await fetch(`http://localhost:8000/api/cham-cong/registration-status/${employeeId}`);\n      const raw = await response.text();\n\n      let result;\n      try {\n        result = JSON.parse(raw);\n      } catch (e) {\n        console.error('❌ Không phải JSON:', raw);\n        setMessage('❌ Không thể kiểm tra trạng thái đăng ký (Phản hồi không hợp lệ)');\n        setHasFaceData(false);\n        setAllowOverride(false);\n        return;\n      }\n\n      if (result.success && result.data && result.data.has_face_data) {\n        setMessage(`ℹ️ Nhân viên này đã đăng ký khuôn mặt vào ${new Date(result.data.registered_at).toLocaleString()}`);\n        setHasFaceData(true);\n        setAllowOverride(false);\n      } else {\n        setMessage('ℹ️ Nhân viên này chưa đăng ký khuôn mặt');\n        setHasFaceData(false);\n        setAllowOverride(false);\n      }\n    } catch (error) {\n      console.error('Error checking registration status:', error);\n      setMessage(`❌ Lỗi khi kiểm tra trạng thái: ${error.message}`);\n      setHasFaceData(false);\n      setAllowOverride(false);\n    }\n  };\n\n  return (\n    <div style={{ padding: '20px', maxWidth: '800px', margin: '0 auto' }}>\n      <h2 style={{ textAlign: 'center', marginBottom: '30px', color: '#007bff' }}>\n        📝 Đăng ký khuôn mặt\n      </h2>\n\n      <div style={{ marginBottom: '20px' }}>\n        <label style={{ display: 'block', marginBottom: '10px', fontWeight: 'bold' }}>Chọn nhân viên:</label>\n        <select\n          value={selectedEmployee?.id || ''}\n          onChange={(e) => {\n            const employee = employees.find(emp => emp.id === parseInt(e.target.value));\n            setSelectedEmployee(employee);\n            setMessage('');\n            setHasFaceData(false);\n            setAllowOverride(false);\n            if (employee) {\n              checkRegistrationStatus(employee.id);\n            }\n          }}\n          style={{\n            width: '100%',\n            padding: '10px',\n            border: '2px solid #ddd',\n            borderRadius: '5px',\n            fontSize: '16px'\n          }}\n          disabled={registrationStatus === 'processing'}\n        >\n          <option value=\"\">-- Chọn nhân viên --</option>\n          {Array.isArray(employees) && employees.map(employee => (\n            <option key={employee.id} value={employee.id}>\n              {employee.ma_nhan_vien} - {employee.ten}\n            </option>\n          ))}\n        </select>\n      </div>\n\n      {selectedEmployee && (\n        <div style={{\n          backgroundColor: '#f8f9fa',\n          padding: '15px',\n          borderRadius: '5px',\n          marginBottom: '20px',\n          border: '1px solid #dee2e6'\n        }}>\n          <h4 style={{ margin: '0 0 10px 0', color: '#495057' }}>Thông tin nhân viên:</h4>\n          <p><strong>Mã:</strong> {selectedEmployee.ma_nhan_vien}</p>\n          <p><strong>Tên:</strong> {selectedEmployee.ten}</p>\n          <p><strong>Email:</strong> {selectedEmployee.email}</p>\n        </div>\n      )}\n\n      {message && (\n        <div style={{\n          padding: '15px',\n          marginBottom: '20px',\n          borderRadius: '5px',\n          backgroundColor: message.includes('❌') ? '#f8d7da' : \n                          message.includes('✅') ? '#d4edda' : \n                          message.includes('ℹ️') ? '#d1ecf1' : '#fff3cd',\n          color: message.includes('❌') ? '#721c24' : \n                 message.includes('✅') ? '#155724' : \n                 message.includes('ℹ️') ? '#0c5460' : '#856404',\n          border: `1px solid ${message.includes('❌') ? '#f5c6cb' : \n                                message.includes('✅') ? '#c3e6cb' : \n                                message.includes('ℹ️') ? '#bee5eb' : '#ffeaa7'}`\n        }}>\n          {message}\n        </div>\n      )}\n\n      {/* Nếu đã có face-data, hiện nút thay mới */}\n      {selectedEmployee && hasFaceData && !allowOverride && (\n        <div style={{ textAlign: 'center', marginBottom: '20px' }}>\n          <button\n            onClick={() => setAllowOverride(true)}\n            style={{\n              padding: '10px 20px',\n              backgroundColor: '#ffc107',\n              color: '#212529',\n              border: 'none',\n              borderRadius: '5px',\n              cursor: 'pointer',\n              fontWeight: 'bold',\n              fontSize: '16px'\n            }}\n          >\n            🔄 Thay mới khuôn mặt\n          </button>\n        </div>\n      )}\n\n      {/* Chỉ cho phép đăng ký khi chưa có face-data hoặc đã xác nhận thay mới */}\n      {selectedEmployee && (!hasFaceData || allowOverride) && (\n        <div style={{ textAlign: 'center' }}>\n          <FaceRecognition \n            onRegisterFace={handleRegisterFace}\n            mode=\"register\"\n            selectedEmployee={selectedEmployee}\n            disabled={registrationStatus === 'processing'}\n          />\n        </div>\n      )}\n\n      <div style={{\n        marginTop: '30px',\n        padding: '20px',\n        backgroundColor: '#e9ecef',\n        borderRadius: '5px'\n      }}>\n        <h4 style={{ color: '#495057', marginBottom: '15px' }}>📋 Hướng dẫn:</h4>\n        <ul style={{ color: '#6c757d', lineHeight: '1.6' }}>\n          <li>Chọn nhân viên cần đăng ký khuôn mặt</li>\n          <li>Đảm bảo ánh sáng đủ và khuôn mặt rõ nét</li>\n          <li>Nhìn thẳng vào camera và giữ yên</li>\n          <li>Chờ thanh tiến trình hoàn thành</li>\n          <li>Mỗi nhân viên chỉ đăng ký một lần</li>\n        </ul>\n      </div>\n    </div>\n  );\n};\n\nexport default RegisterFace;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}